<?xml version="1.0" encoding="UTF-8"?>
<div xmlns="http://www.w3.org/1999/xhtml" xmlns:xi="http://www.w3.org/2001/XInclude" data-template="templates:surround" data-template-with="templates/page.html" data-template-at="content">
    <!--<xi:include href="banner.html"/>-->
    <div class="grey-dark">
        <div class="container interior-content white">
            <div data-template="app:h1"/>
            <div class="row">
                <div class="col-sm-2 col-md-2">
                    <div class="panel panel-default">
                        <div class="panel-heading">Table of Contents  
                            <a href="#" data-toggle="collapse" data-target="#showToc">
                                <span id="tocIcon" class="glyphicon glyphicon-collapse-up"/>
                            </a>
                        </div>
                        <div class="panel-body collapse" id="showToc">
                            <div data-template="app:display-toc"/>
                        </div>
                    </div>
                    <script type="text/javascript">
                        <![CDATA[
                        $(window).bind('resize load', function() {
                            if ($(this).width() < 767) {
                                $('#showToc').removeClass('in');
                                $('#showToc').addClass('out');
                                $("#tocIcon").removeClass("glyphicon-collapse-up").addClass("glyphicon-collapse-down");
                            } else {
                                $('#showToc').removeClass('out');
                                $('#showToc').addClass('in');
                                $('#showToc').removeAttr( "style" );
                                $("#tocIcon").removeClass("glyphicon-collapse-down").addClass("glyphicon-collapse-up");
                            }
                            $('#showToc').on('shown.bs.collapse', function () {
                                $("#tocIcon").removeClass("glyphicon-collapse-down").addClass("glyphicon-collapse-up");
                            });
                            
                            $('#showToc').on('hidden.bs.collapse', function () {
                                $("#tocIcon").removeClass("glyphicon-collapse-up").addClass("glyphicon-collapse-down");
                            });                                
                        });
                        ]]>
                    </script>
                </div> 
                <div class="col-sm-6 col-md-6 col-lg-7">
                    <div data-template="app:display-nodes" data-template-paths="/descendant::tei:body"/>
                </div>
                <div class="col-sm-4 col-md-4 col-lg-3">
                    <div  id="rightCol">
                        <div id="sedraDisplay" class="sedra panel panel-default">
                            <div class="panel-body">
                                <img src="$app-root/resources/img/sedra-logo.png" title="Sedra logo" width="100%"/>
                                <h3>Syriac Lexeme</h3>
                                <div id="sedraContent">
                                    <div class="content"/>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div data-template="app:rec-status"/>
                    <div data-template="app:display-ids"/>
                    <div data-template="app:display-nodes" data-template-paths="/descendant::tei:teiHeader"/>
                    <div class="info-btns">
                        <button class="btn btn-default" data-toggle="modal" data-target="#feedback">Corrections/Additions?</button> 
                    </div>
                    <div data-template="app:display-related"/>
                </div>
            </div>
            <script type="text/javascript">
                $('button.toggleDisplay').click(function() {
                var display = $(this).data("element");
                $('.'+ display).children('.text-number').toggle();
                $('.'+ display).children('.head').toggle();
                //$('span.text-display' + ' .' + display).toggleClass( "textBlock" );
                $(this).toggleClass( "active" );
                console.log(display);
                });
                
                $('button.toggleHead').click(function() {
                $('.head').toggleClass( "hidden" );
                });
                
                $('a.sedra').click(function(e) {
                //event.preventDefault();
                e.stopPropagation();
                e.preventDefault();
                var href = $(this).attr('href');
                $('#sedraDisplay').css('display','block');
                $( "#sedraContent div.content" ).load( href );
                });
                
                $('html').click(function() {
                $('#sedraDisplay').hide();
                $('#sedraContent div.content').empty();
                })
                
                $('#rightCol').click(function(e){
                e.stopPropagation();
                });
                
            </script>
            
            <!--<div data-template="app:citation"/>-->
        </div>
        <!-- Modal email form-->
        <div data-template="app:contact-form"/>
        <div class="modal fade" id="moreInfo" tabindex="-1" role="dialog" aria-labelledby="moreInfoLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">
                            <span aria-hidden="true">x</span>
                            <span class="sr-only">Close</span>
                        </button>
                        <h2 class="modal-title" id="moreInfoLabel"/>
                    </div>
                    <div class="modal-body" id="modal-body">
                        <div id="moreInfo-box"/>
                        <br style="clear:both;"/>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>